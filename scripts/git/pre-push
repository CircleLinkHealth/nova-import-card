#!/bin/sh


composer dumpautoload

COMPOSER_DUMP_AUTOLOAD_EC=$?

echo 'Checking Javascript code quality...'
jscs ./js
JSCS_EC=$?

echo 'Checking PHP code style...'
phpcs -h . --standard=PSR2
PHPCS_EC=$?

# composer test
# COMPOSER_TEST_EC=$?

# npm test -- --silent
NPM_TEST_EC=$?

let "ERROR = $NPM_TEST_EC + $JSCS_EC + PHPCS_EC + $COMPOSER_DUMP_AUTOLOAD_EC"
# ERROR=$NPM_TEST_EC

if [ ${ERROR} -eq "0" ]
then
    echo "all good! üòç"
else
    echo "push aborted üëé | error $ERROR"
    exit ${ERROR}
fi