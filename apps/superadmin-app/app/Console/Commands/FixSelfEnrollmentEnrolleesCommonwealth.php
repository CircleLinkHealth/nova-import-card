<?php

/*
 * This file is part of CarePlan Manager by CircleLink Health.
 */

namespace App\Console\Commands;

use CircleLinkHealth\SelfEnrollment\Jobs\CreateSurveyOnlyUserFromEnrollee;
use CircleLinkHealth\SharedModels\Entities\Enrollee;
use Illuminate\Console\Command;

class FixSelfEnrollmentEnrolleesCommonwealth extends Command
{
    /**
     * The console command description.
     *
     * @var string
     */
    protected $description = 'Will run CreateSurveyOnlyUserFromEnrolle for Commonwealth.';
    /**
     * The name and signature of the console command.
     *
     * @var string
     */
    protected $signature = 'create:commonwealth-survey-only-users';

    /**
     * Create a new command instance.
     *
     * @return void
     */
    public function __construct()
    {
        parent::__construct();
    }

    public function getEnrolleeIds()
    {
        return [
            372202,
            372203,
            372207,
            372209,
            372220,
            372240,
            372244,
            372251,
            372252,
            372256,
            372257,
            372258,
            372263,
            372268,
            372277,
            372300,
            372311,
            372316,
            372332,
            372335,
            372343,
            372349,
            372354,
            372356,
            372357,
            372364,
            372366,
            372369,
            372370,
            372378,
            372379,
            372381,
            372382,
            372388,
            372390,
            372391,
            372393,
            372399,
            372402,
            372411,
            372412,
            372415,
            372416,
            372417,
            372424,
            372426,
            372431,
            372434,
            372437,
            372444,
            372446,
            372447,
            372452,
            372454,
            372458,
            372463,
            372465,
            372473,
            372474,
            372478,
            372486,
            372489,
            372499,
            372504,
            372507,
            372510,
            372511,
            372516,
            372520,
            372521,
            372526,
            372527,
            372529,
            372531,
            372539,
            372543,
            372552,
            372553,
            372567,
            372568,
            372569,
            372579,
            372588,
            372590,
            372593,
            372594,
            372604,
            372607,
            372610,
            372624,
            372631,
            372650,
            372651,
            372659,
            372661,
            372674,
            372677,
            372678,
            372680,
            372684,
            372685,
            372687,
            372688,
            372692,
            372695,
            372704,
            372705,
            372706,
            372708,
            372712,
            372716,
            372721,
            372727,
            372728,
            372735,
            372740,
            372743,
            372744,
            372747,
            372750,
            372753,
            372757,
            372758,
            372759,
            372766,
            372771,
            372774,
            372777,
            372791,
            372792,
            372793,
            372795,
            372796,
            372801,
            372805,
            372806,
            372810,
            372818,
            372819,
            372820,
            372823,
            372826,
            372830,
            372840,
            372841,
            372842,
            372844,
            372848,
            372858,
            372860,
            372876,
            372882,
            372888,
            372897,
            372899,
            372901,
            372904,
            372939,
            372945,
            372948,
            372964,
            372976,
            372987,
            372993,
            373001,
            373006,
            373024,
            373026,
            373052,
            373054,
            373056,
            373057,
            373070,
            373078,
            373079,
            373104,
            373105,
            373112,
            373113,
            373116,
            373118,
            373134,
            373139,
            373142,
            373146,
            373150,
            373159,
            373168,
            373169,
            373170,
            373177,
            373178,
            373182,
            373186,
            373192,
            373199,
            373202,
            373204,
            373210,
            373211,
            373213,
            373214,
            373224,
            373227,
            373228,
            373229,
            373231,
            373247,
            373248,
            373250,
            373251,
            373264,
            373265,
            373276,
            373279,
            373290,
            373297,
            373298,
            373306,
            373320,
            373331,
            373335,
            373357,
            373360,
            373370,
            373373,
            373381,
            373383,
            373390,
            373408,
            373415,
            373416,
            373430,
            373432,
            373437,
            373440,
            373445,
            373448,
            373461,
            373467,
            373478,
            373479,
            373480,
            373481,
            373482,
            373485,
            373487,
            373488,
            373493,
            373501,
            373506,
            373511,
            373519,
            373523,
            373532,
            373544,
            373545,
            373548,
            373550,
            373551,
            373560,
            373566,
            373567,
            373568,
            373572,
            373579,
            373585,
            373588,
            373593,
            373602,
            373614,
            373628,
            373633,
            373635,
            373636,
            373638,
            373648,
            373654,
            373658,
            373666,
            373667,
            373668,
            373670,
            373673,
            373677,
            373682,
            373684,
            373697,
            373700,
            373710,
            373712,
            373724,
            373726,
            373727,
            373742,
            373745,
            373748,
            373749,
            373750,
            373757,
            373766,
            373769,
            373773,
            373781,
            373782,
            373783,
            373792,
            373794,
            373796,
            373798,
            373800,
            373811,
            373813,
            373815,
            373825,
            373837,
            373839,
            373841,
            373844,
            373845,
            373846,
            373847,
            373853,
            373854,
            373855,
            373862,
            373863,
            373864,
            373867,
            373880,
            373884,
            373885,
            373894,
            373895,
            373896,
            373910,
            373914,
            373918,
            373921,
            373924,
            373946,
            373952,
            373953,
            373954,
            373955,
            373956,
            373963,
            373968,
            373969,
            373972,
            373974,
            373982,
            373986,
            373987,
            373989,
            373994,
            374002,
            374013,
            374026,
            374027,
            374033,
            374038,
            374040,
            374042,
            374043,
            374045,
            374048,
            374058,
            374064,
            374069,
            374081,
            374095,
            374097,
            374101,
            374103,
            374121,
            374125,
            374127,
            374130,
            374133,
            374138,
            374142,
            374144,
            374150,
            374152,
            374155,
            374168,
            374172,
            374174,
            374186,
            374190,
            374194,
            374195,
            374199,
            374203,
            374204,
            374213,
            374215,
            374235,
            374241,
            374250,
            374251,
            374255,
            374260,
            374264,
            374267,
            374272,
            374275,
            374276,
            374277,
            374285,
            374292,
            374295,
            374301,
            374302,
            374303,
            374306,
            374310,
            374316,
            374322,
            374329,
            374340,
            374346,
            374353,
            374354,
            374355,
            374369,
            374370,
            374373,
            374375,
            374377,
            374378,
            374379,
            374380,
            374384,
            374389,
            374390,
            374393,
            374397,
            374399,
            374402,
            374405,
            374406,
            374419,
            374424,
            374426,
            374434,
            374435,
            374447,
            374450,
            374453,
            374468,
            374470,
            374473,
            374485,
            374490,
            374499,
            374505,
            374507,
            374508,
            374515,
            374530,
            374532,
            374537,
            374541,
            374545,
            374548,
            374557,
            374566,
            374571,
            374581,
            374585,
            374589,
            374592,
            374612,
            374617,
            374621,
            374625,
            374629,
            374630,
            374631,
            374635,
            374637,
            374638,
            374649,
            374651,
            374652,
            374655,
            374667,
            374670,
            374678,
            374689,
            374694,
            374695,
            374698,
            374701,
            374708,
            374711,
            374713,
            374724,
            374736,
            374738,
            374739,
            374752,
            374757,
            374759,
            374762,
            374765,
            374776,
            374781,
            374782,
            374787,
            374794,
            374797,
            374799,
            374802,
            374808,
            374810,
            374811,
            374830,
            374837,
            374839,
            374849,
            374864,
            374866,
            374879,
            374881,
            374888,
            374897,
            374898,
            374899,
            374902,
            374905,
            374906,
            374908,
            374918,
            374921,
            374925,
            374947,
            374948,
            374954,
            374955,
            374956,
            374957,
            374959,
            374963,
            374967,
            374969,
            374974,
            374977,
            374989,
            374992,
            375001,
            375003,
            375029,
            375067,
            375629,
            375646,
            375662,
            375765,
            375783,
            375788,
            375792,
            375795,
            375801,
            375804,
            375810,
            375815,
            375816,
            375819,
            375823,
            375826,
            375856,
            375857,
            375867,
            375871,
            375875,
            375880,
            375881,
            375883,
            375891,
            375893,
            375898,
            375899,
            375900,
            375908,
            375934,
            375938,
            375941,
            375942,
            375952,
            375954,
            375962,
            375964,
            375968,
            375974,
            375979,
            375981,
            375986,
            375996,
            375998,
            375999,
            376003,
            376007,
            376017,
            376026,
            376028,
        ];
    }

    /**
     * Execute the console command.
     *
     * @return int
     */
    public function handle()
    {
        $enrolleeIds = $this->getEnrolleeIds();
        Enrollee::where('practice_id', 232)
            ->whereIn('id', $enrolleeIds)
            ->whereNull('user_id')
            ->whereNotNull('provider_id')
            ->chunk(50, function ($enrollees) {
                foreach ($enrollees as $enrollee) {
                    CreateSurveyOnlyUserFromEnrollee::dispatch($enrollee);
                }
            });

        $this->info('Command dispatched for each Enrollee');
    }
}
